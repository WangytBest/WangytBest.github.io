---
title: 移动端适配方案
date: 2018-03-21 17:17:24
tags:
---

## 基本概念

基本概念（术语）

### 视窗（viewport）

简单理解`viewport`就是浏览器窗口大小。在桌面浏览器中，viewport就是浏览器窗口的高度和宽度。在移动设备中，由于移动端的viewport太窄，为了更好为CSS布局服务，所以提供了两个viewport。

> `虚拟viewport` ： `visual viewport`
> `布局viewport` ： `layout viewport`

### 物理像素 physical pixel
物理像素也被称为设备像素，他是显示设备中一个最小的物理设备，物理像素单位。每个像素可以根据操作系统设置自己的颜色和亮度。

### 设备独立像素 device-independent pixel - 逻辑像素
设备独立像素也称为密度无关像素，可以认为是计算机坐标系统中的一个点，这个点代表一个可以程序使用的虚拟像素，比如CSS像素，然后由相关系统转换为物理像素。

### CSS像素（与设备无关像素 device-independent piexl）
一个抽象单位，主要使用在浏览器上，用来精确度量Web页面上点内容。一般CSS像素称为与设备无关的像素（device-independent piexl），DIPs。

### 屏幕密度 
屏幕密度是指一个设备表面上存在的像素数量，通常以**每英寸有多少像素来计算**（PPI）

### 设备像素比（device pixel ratio）
设备像素比简称为**dpr**，定义了物理像素和设备独立像素之间的对应关系
> 设备像素 = 物理像素 / 设备独立像素

* 在JavaScript中，可以通过`window.devicePiexlRatio`获取当前设备的dpr。
* 在css中，可以通过`-webkit-device-piexl-ratio`、`-webkit-min-device-piexl-ratio`、`-webkit-max-device-piexl-ratio`进行媒体查询。

### 常见终端设备参数

![常见设备终端](https://hexo-blog-1256208212.cos.ap-beijing.myqcloud.com/1521689499823.jpg)
[终端设备的参数](https://design.google.com/devices/)

### UI设计与前端开发适配的协作

选择一种尺寸作为设计和开发的基准，定义其余尺寸的适配规则，对于特殊适配给出设计效果

淘宝手淘团队适配协作模式
![淘宝手淘团队适配协作模式](https://hexo-blog-1256208212.cos.ap-beijing.myqcloud.com/taobaotuanduishipei.jpeg)


视觉稿

在开发之前，UI设计师提供含有标注的PSD文件，为视觉稿。
对于移动端而言，为了做到页面高清的效果，视觉稿会遵循以下两点：
1. 选取一款手机的`屏幕宽度`最为基准，`iphone6（375pt * 667pt）`
2. 对于retina屏幕（如`dpr = 2`）,为了达到高清的效果，视觉稿的画布大小会是`基准`的`2倍`，也就是说像素点个数是原来的4倍。

> iphone6： 
`dpr`：2
`设备独立像素`：375pt \* 667pt (设备宽度为375pt，设备高度667pt)
`物理像素`：750pt \* 1334pt

*视觉稿按照设备独立像素设计，放大两倍*
UI设计师常选择iPhone6作为基准设计尺寸，交付给前端的设计尺寸是按`750px * 1334px`为准(高度会随着内容多少而改变)。前端开发人员通过一套适配规则自动适配到其他的尺寸。

**位图像素**
一个位图像素是栅格图像最小的数据单元，如png、jpg、gif等。每一个位图像素都包含着一些自身的显示信息，包括显示位置、颜色值、透明度等

理论上，**一个位图像素对应一个物理像素**，图片才能得到完美清晰的展示。
在Retina屏幕下，**一个位图像素对应4个物理像素**。由于单个位图像素不可以在分割，所以只能就近取色，就会出现位图像素点不够，从而导致图片模糊。所以

## 参考文档 
* [A tale of two viewports - Part One](https://www.quirksmode.org/mobile/viewports.html)
* [A tale of two viewports - Part Two](https://www.quirksmode.org/mobile/viewports2.html)